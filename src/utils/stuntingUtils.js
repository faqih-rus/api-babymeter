const getStuntingThresholds = (age) => {
    const thresholds = {
        0: 49.9,
        1: 54.7,
        2: 58.4,
        3: 61.4,
        4: 64.0,
        5: 66.4,
        6: 68.6,
        7: 70.5,
        8: 72.3,
        9: 73.9,
        10: 75.4,
        11: 76.8,
        12: 78.0,
        13: 79.2,
        14: 80.5,
        15: 81.7,
        16: 82.9,
        17: 84.1,
        18: 85.1,
        19: 86.1,
        20: 87.1,
        21: 88.0,
        22: 88.9,
        23: 89.7,
        24: 90.5,
    };
    return thresholds[age];
};

const getWHOPercentile = (age, panjang_badan) => {
    const whoData = {
        0: [46.1, 48.0, 49.9, 51.8, 53.7, 55.6],
        1: [51.1, 53.0, 54.9, 56.9, 58.8, 60.7],
        2: [54.7, 56.7, 58.6, 60.6, 62.5, 64.4],
        3: [57.6, 59.6, 61.5, 63.5, 65.5, 67.5],
        4: [60.0, 62.0, 64.0, 66.0, 68.0, 70.0],
        5: [62.1, 64.1, 66.1, 68.2, 70.2, 72.2],
        6: [64.0, 66.0, 68.0, 70.1, 72.1, 74.2],
        7: [65.7, 67.7, 69.8, 71.9, 73.9, 76.0],
        8: [67.2, 69.3, 71.4, 73.5, 75.6, 77.7],
        9: [68.6, 70.7, 72.9, 75.0, 77.1, 79.3],
        10: [69.9, 72.1, 74.2, 76.4, 78.6, 80.8],
        11: [71.1, 73.3, 75.5, 77.7, 79.9, 82.1],
        12: [72.2, 74.5, 76.7, 79.0, 81.2, 83.5],
        13: [73.3, 75.6, 77.9, 80.2, 82.5, 84.8],
        14: [74.3, 76.7, 79.0, 81.4, 83.7, 86.0],
        15: [75.3, 77.7, 80.1, 82.5, 84.9, 87.3],
        16: [76.2, 78.7, 81.2, 83.6, 86.1, 88.5],
        17: [77.1, 79.7, 82.2, 84.7, 87.2, 89.7],
        18: [78.0, 80.6, 83.2, 85.8, 88.3, 90.9],
        19: [78.8, 81.5, 84.2, 86.8, 89.4, 92.0],
        20: [79.6, 82.4, 85.1, 87.8, 90.5, 93.2],
        21: [80.4, 83.2, 86.0, 88.8, 91.5, 94.3],
        22: [81.2, 84.0, 86.9, 89.7, 92.5, 95.3],
        23: [81.9, 84.8, 87.7, 90.6, 93.5, 96.3],
        24: [82.6, 85.6, 88.5, 91.5, 94.4, 97.3],
    };

    const percentiles = whoData[age];

    if (!percentiles) return null;
    if (panjang_badan < percentiles[0]) return 0.1;
    if (panjang_badan < percentiles[1]) return 3;
    if (panjang_badan < percentiles[2]) return 15;
    if (panjang_badan < percentiles[3]) return 50;
    if (panjang_badan < percentiles[4]) return 85;
    if (panjang_badan < percentiles[5]) return 97;
    return 99.9;
};

module.exports = { getStuntingThresholds, getWHOPercentile };